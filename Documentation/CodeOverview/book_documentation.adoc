= Documentation
:toc:

== Ubiquitous Language
- *attendance*: a student being present (or belatedly present) or absent on a lesson.
- *group*: a group of students following a course at ITVitae, for example Java55
- *lesson*: a session scheduled for a group, on a day, with a teacher. A group has only one lesson per day, and the lesson can have only one teacher. Similary, a teacher can only give one lesson per day (and can therefore not have two groups on the same day). Of course, there can be multiple lessons on one day, as there are usually multiple groups.
- *student*: someone following a course at ITVitae. Must be a member of a group
- *registrar*: someone who can register an attendance. Note: registrar is basically an authorized user; there are 'pure admins' who cannot register attendances and are still part of the registrar table
- *teacher*: someone who can be scheduled to give a lesson.


== Backend

== Frontend:

=== Group-management-page
    * Access only for Super-admins
    * required endpoints:
        ** groups GET
        ** groups POST
        ** groups/{id} DELETE

=== Registration-page

    * Access to everyone
    * Requires:
        ** invitations/{invitationId} GET
        ** personnel/register POST

=== Worker-management-page

    * Access only for to Admins and Super-admins
    * requires:
        ** personnel GET // get all registrars
        ** personnel/teachers GET // get all teachers
        ** personnel/{id} DELETE // remove a registrar
        ** invitations GET // get all current invitations (without id!)
        ** invitations/for-ROLE POST // send an invitation
           *** NOTE: only super-admins should be able to create new admins and super-admins
        ** teachers POST // create external teacher
        ** teachers/{id} DELETE // remove an external teacher

== Testing

=== For testing
docker compose -f docker-compose-test.yml up --build -d

=== Pure-admin
* kan inloggen
* kan docenten uitnodigen
* kan studentbegeleiders uitnodigen
* kan administratoren uitnodigen
* kan superadministratoren uitnodigen
* kan uitnodigingen opnieuw versturen
* kan uitnodigingen intrekken

=== Super-admin
* kan inloggen
* kan groep aanmaken (test met 2 groepen, voor 1 plan je les in verleden)
* kan deelnemers aanmaken
* kan deelnemers verwijderen uit een groep
* kan les in het verleden voor een groep plannen
* kan les in de toekomst voor een groep plannen
* kan toekomstige lessen verwijderen
* kan verleden-groep archiveren
* kan toekomst-groep verwijderen
* kan externe docenten aanmaken
* kan externe docenten verwijderen
* kan docenten uitnodigen
* kan studentbegeleiders uitnodigen
* kan administratoren uitnodigen
* kan superadministratoren uitnodigen
* kan uitnodigingen opnieuw versturen
* kan uitnodigingen intrekken
* kan aanwezigheid van alle groepen zien
* kan aanwezigheidsstatus veranderen
* kan aanwezigheidsnotitie veranderen
* kan vooruit en achteruit in attendances
* kan naar datum van attendance gaan via datuminvoer (klikken)
* kan naar datum van attendance gaan via datuminvoer (typen)
* kan geschiedenis van student zien
* kan alle ongeregistreerde attendances van een groep op aanwezig zetten

=== Admin
* kan inloggen
* kan docenten uitnodigen
* kan studentbegeleiders uitnodigen
* kan uitnodigingen opnieuw versturen
* kan uitnodigingen intrekken
* kan aanwezigheid van alle groepen zien
* kan aanwezigheidsstatus veranderen
* kan aanwezigheidsnotitie veranderen
* kan vooruit en achteruit in attendances
* kan naar datum van attendance gaan via datuminvoer (klikken)
* kan naar datum van attendance gaan via datuminvoer (typen)
* kan geschiedenis van student zien
* kan alle ongeregistreerde attendances van een groep op aanwezig zetten

=== Coach
* kan inloggen
* kan aanwezigheid van alle groepen zien
* kan aanwezigheidsstatus veranderen
* kan aanwezigheidsnotitie veranderen
* kan vooruit en achteruit in attendances
* kan naar datum van attendance gaan via datuminvoer (klikken)
* kan naar datum van attendance gaan via datuminvoer (typen)
* kan geschiedenis van student zien
* kan alle ongeregistreerde attendances van een groep op aanwezig zetten

=== Teacher
* kan inloggen
* kan (voorlopig) alleen aanwezigheid op eigen lessen zien
* kan aanwezigheidsstatus veranderen
* kan aanwezigheidsnotitie veranderen
* kan vooruit en achteruit in attendances
* kan naar datum van attendance gaan via datuminvoer (klikken)
* kan naar datum van attendance gaan via datuminvoer (typen)
* kan alle ongeregistreerde attendances van een groep op aanwezig zetten

=== Uitgenodigde
* kan een paswoord opgeven
* kan inloggen

== Role of the components
* Getting all attendances in all groups at a certain date: DatePicker
   ** Getting all attendances in _one_ group at a certain date: GroupElement
     *** Getting the attendance of one person at a certain date: AttendanceDisplay

== Ideas for further enhancements

=== Aesthetics
Add styling/css

=== Communication with users
- Add catch for 500 status to axios

=== Efficiency
0.33 (2 euros/6 hours) Get websocket demo working (#2)

=== User error prevention
- ensure new personnel/teachers are tested using IgnoreCase (no Wim WIM, wim as different persons)
- Reconsider removing someone from group
- Prevent duplicate emailaddresses?

== Features
On Hold (see comment) - Allow teachers to see other groups
NtH Add export to Excel feature (#142)
?Get rid of some sessionschedule buttons / Disable generate button if no days selected / Make "genereer periode" superfluous
- Earlier error correction genereer periode
Ideally: allow to email invitations
Info on who invited someone?
Allow registrations to send e-mails #132


=== Maintainability
? Add book-type documentation (Consider making "book-type" documentation for new contributors, like on p812 of Code Complete 2)
- Update ERD (#144)
- Create build pipeline for deployment (for bugfixes and such)
- Clean up frontend structure (and backend structure)
- Eliminate the current UUID PKs from teacher and registrar, using the FK to WorkerIdentity as PK
- get the teachers from the teachers/ endpoint instead of the personnel/teachers endpoint
- Find out a way to reduce the duplication in authorization headers in the frontend
- rename personnel to registrar throughout (to be more consistent)
- Add Ubiquitous Language (lessons etc.)
- Spike: compare automated testing frameworks
- Do some error-checking of SWC

=== Questions for others
- Ask Chantal if past classes should be allowed to be scheduled #139
- Ask Niels: Create new AT channel

=== Security
0 Check all endpoints for correct authentication // I think already done to a sufficient degree

